---
apiVersion: argoproj.io/v1alpha1
kind: AppProject
metadata:
  name: cluster-config
  namespace: openshift-gitops
spec:
  description: "Infrastructure and Operator Policies"
  clusterResourceWhitelist: [{group: '*', kind: '*'}]
  destinations: [{namespace: '*', server: 'https://kubernetes.default.svc'}]
  sourceRepos: ['https://github.com/mmwillingham/gitops-standards-repo']
---
apiVersion: argoproj.io/v1alpha1
kind: AppProject
metadata:
  name: virt
  namespace: openshift-gitops
spec:
  description: "Virtualization Workloads"
  clusterResourceWhitelist: [{group: '*', kind: '*'}]
  destinations: [{namespace: 'openshift-virt-*', server: 'https://kubernetes.default.svc'}]
  sourceRepos: ['https://github.com/mmwillingham/gitops-standards-repo']
  roles:
  - name: virt-admins
    description: Access for Virt Admin Team
    policies:
    - p, proj:virt:virt-admins, applications, get, virt/*, allow
    - p, proj:virt:virt-admins, applications, sync, virt/*, allow